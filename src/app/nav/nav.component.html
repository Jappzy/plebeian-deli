<mat-sidenav-container>

    <mat-sidenav #sidenav>

        <!-- Logged in Side Nav header-->
        <div *ngIf="auth.user$ | async as user; else justCloseButton">
            <button mat-icon-button (click)="sidenav.close()" style="margin-left: auto">
                <mat-icon>close</mat-icon>
            </button>

            <img
                [src]="user.thumbnail | async"
                alt="Profile Pic"
                class="profile-pic"
                [routerLink]="'/' + user.username"
                (click)="sidenav.close()">

            <button mat-button [routerLink]="'/' + user.username" class="sidenav-button" style="width: 100%; text-align: center;" (click)="sidenav.close()">{{ user.username }}</button>
    
            <hr style="width: 95%; margin: 0 auto 20px;">
        </div>

        <!-- Logged Out Side Nav header (just close button)-->
        <ng-template #justCloseButton>
            <button mat-icon-button (click)="sidenav.close()" style="margin-left: auto">
                <mat-icon>close</mat-icon>
            </button>

            <button mat-button routerLink="/login" class="sidenav-button" (click)="sidenav.close()">SIGN IN</button>
        </ng-template>

        <!-- <button mat-button routerLink="/prime-cuts" class="sidenav-button" (click)="sidenav.close()">PRIME CUTS</button> -->
        <button mat-button routerLink="/deli" class="sidenav-button" (click)="sidenav.close()">DELI</button>
        <button mat-button routerLink="/exhibitions" class="sidenav-button" (click)="sidenav.close()">EXHIBITIONS</button>
        <button mat-button routerLink="/calendar" class="sidenav-button" (click)="sidenav.close()">CALENDAR</button>
        <button mat-button routerLink="/members" class="sidenav-button" (click)="sidenav.close()">MEMBERS</button>
        <!-- <button mat-button routerLink="/subscriptions" class="sidenav-button" (click)="sidenav.close()">SELL YOUR WORK</button> -->
        <!-- <button mat-button routerLink="/shop" class="sidenav-button" (click)="sidenav.close()">Shop</button> -->

        <ng-container *ngIf="auth.user$ | async as user">
            <button mat-button [routerLink]="'/' + user.username" class="sidenav-button" (click)="sidenav.close()">PROFILE</button>
            <button mat-button routerLink="/orders" class="sidenav-button" (click)="sidenav.close()">ORDERS</button>
            <button *ngIf="user.membership === 'artist'" mat-button routerLink="/seller" class="sidenav-button" (click)="sidenav.close()">SELLER INFO</button>
            <button mat-button class="sidenav-button" (click)="auth.logout(); sidenav.close();">LOG OUT</button>
        </ng-container>

    </mat-sidenav>

    <mat-sidenav-content style="position: static">

        <app-widescreen-header class="widescreen-header"></app-widescreen-header>

        <app-mobile-header class="mobile-header" (openSidenav)="sidenav.open()"></app-mobile-header>

        <router-outlet></router-outlet>

        <br><br><br><br>

        <app-footer-bar class="mobile-footer"></app-footer-bar>

    </mat-sidenav-content>

</mat-sidenav-container>
